(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{834:function(e,t,r){"use strict";r.r(t);var a=r(991);r.d(t,"fileEntryAddon",(function(){return a.t})),r.d(t,"createEntryBatch",(function(){return a.e}));var n=r(997);r.d(t,"moveCopyItems",(function(){return n.moveCopyItems}));var s=r(678);r.d(t,"demandItems",(function(){return s.demandItems}))},895:function(e,t,r){"use strict";r.r(t),r.d(t,"deleteItemsOperation",(function(){return i})),r.d(t,"deleteProgressKeyFacet",(function(){return c})),r.d(t,"deleteItems",(function(){return o})),r.d(t,"deleteItemsWithNoProgress",(function(){return l}));var a=r(3),n=r(60),s=r(332),i=new a.Facet("deleteItems"),c=new s.ProgressKeyFacet("deleteItems"),o=Object(s.implementOperationWithProgress)({operationTypeFacet:i,progressKeyFacet:c}),l=Object(n.implementOperation)({operationTypeFacet:i})},908:function(e,t,r){"use strict";r.r(t),r.d(t,"entryBatchFacet",(function(){return n})),r.d(t,"sourceFileFacet",(function(){return s}));var a=r(3),n=new a.Facet("entryBatch"),s=new a.Facet("sourceFile")},917:function(e,t,r){"use strict";r.r(t),r.d(t,"moveCopyItemsOperation",(function(){return c})),r.d(t,"moveCopyItemsProgressKeyFacet",(function(){return o})),r.d(t,"MoveCopyItemOperationError",(function(){return l}));var a=r(0),n=r(3),s=r(240),i=r(332),c=new n.Facet("moveCopyItems"),o=new i.ProgressKeyFacet("moveCopyItems"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t}(s.ItemOperationError)},991:function(e,t,r){"use strict";r.d(t,"t",(function(){return x})),r.d(t,"e",(function(){return T}));var a=r(0),n=r(279),s=r(62),i=r(529),c=r(895),o=r(76),l=r(200),m=r(3),u=r(117),d=r(60),p=r(71),O=r(10),b=r(35),f=r(127),g=r(686),I=r(908),j=r(235),v=r(82),y=r(139),_=Object(v.asOnceOnly)((function(e){var t,r=[];return function(a){var n=new y.Signal,s=n.resolve,i=n.promise;return r.push({resolve:s,itemResolver:a}),t||(t=setTimeout((function(){!function(){var a=r;r=[],t=void 0;var n=[];e(Object(j.asBatch)((function(){for(var t=0,r=a;t<r.length;t++){var s=r[t],i=s.resolve,c=s.itemResolver;n.push(i),e(c.execute())}})));for(var s=0,i=n;s<i.length;s++){(0,i[s])()}}()}),500)),i}})),h=new l.AutoKeyFacet("batch");var F=new o.KeyFacet("batchChildren",{batch:Object(o.subKeyPart)(h)}),C=new o.KeyFacet("fileEntry",{batch:Object(o.subKeyPart)(h),index:Object(o.numberPart)(),path:Object(o.stringPart)()}),K=new o.KeyFacet("fileEntryChildren",{fileEntry:Object(o.subKeyPart)(C)}),w=new o.KeyFacet("fileEntryDirectoryPage",{fileEntryChildren:Object(o.subKeyPart)(K),startIndex:Object(o.numberPart)()}),P=new m.Facet("entry"),k=new m.Facet("rootEntries"),z=new m.Facet("directoryPage"),x=Object(u.createAddon)((function(){return function(e){e(Object(j.asBatch)((function(){e(Object(s.supportFacets)({keyFacet:h,facets:[p.defaultChildItemSetFacet]})),e(Object(s.supportFacets)({keyFacet:F,facets:[p.childItemsFacet]})),e(Object(s.supportFacets)({keyFacet:C,facets:[O.displayNameFacet,p.defaultChildItemSetFacet,I.sourceFileFacet,O.fileSizeFacet,O.fileNameFacet,O.folderFacet,O.parentFolderItemFacet,O.dateModifiedFacet]})),e(Object(s.supportFacets)({keyFacet:K,facets:[p.childItemsFacet]})),e(Object(s.supportFacets)({keyFacet:w,facets:[p.childItemsFacet]})),e(Object(d.registerOperationHandler)(h,n.getItemsOperation)(Object(u.createSingleItemOperationHandler)({maxParallelOperationCount:8})(E))),e(Object(d.registerOperationHandler)(F,n.getItemsOperation)(Object(u.createSingleItemOperationHandler)({maxParallelOperationCount:8})(S))),e(Object(d.registerOperationHandler)(C,n.getItemsOperation)(Object(u.createSingleItemOperationHandler)({maxParallelOperationCount:128})(H))),e(Object(d.registerOperationHandler)(K,n.getItemsOperation)(Object(u.createSingleItemOperationHandler)({maxParallelOperationCount:32})(N))),e(Object(d.registerOperationHandler)(w,n.getItemsOperation)(Object(u.createSingleItemOperationHandler)({maxParallelOperationCount:32})(R))),e(Object(d.registerOperationHandler)(h,c.deleteItemsOperation)(Object(u.createSingleItemOperationHandler)({maxParallelOperationCount:8})(B)))})))}}));function T(e){return function(t){var r;t(x);var n=h.serializeNext(),s=new f.ItemResolver;return s.resolveItems({items:(r={},r[n]=Object(a.__assign)(Object(a.__assign)({},I.entryBatchFacet.pack({})),k.pack(e.entries)),r)}),t(s.execute()),{itemKey:n}}}function E(e){var t=this,r=e.itemKey,n=h.deserialize(r);return function(e){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t,s;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return e(Object(b.readItems)((function(e){return e.demandItemFacet(k,r)})))?((t=new f.ItemResolver).resolveItems({items:(s={},s[r]=Object(a.__assign)(Object(a.__assign)({},I.entryBatchFacet.pack({})),p.defaultChildItemSetFacet.pack({itemKey:F.serialize({batch:n})})),s)}),[4,e(_)(t)]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}}function S(e){var t=this,r=e.itemKey,n=F.deserialize(r).batch,s=h.serialize(n);return function(e){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t,i,c,o,l,m,u,d,O,g;return Object(a.__generator)(this,(function(I){switch(I.label){case 0:if(!(t=e(Object(b.readItems)((function(e){return e.demandItemFacet(k,s)})))))return[3,2];for(i=new f.ItemResolver,c=[],o=0,l=0,m=t;l<m.length;l++)u=m[l],d=C.serialize({batch:n,index:o,path:u.name}),i.resolveItems({items:(O={},O[d]=Object(a.__assign)({},P.pack(u)),O)}),c.push(d),o++;return i.resolveItems({items:(g={},g[r]=Object(a.__assign)({},p.childItemsFacet.pack({itemKeys:c})),g)}),[4,e(_)(i)];case 1:I.sent(),I.label=2;case 2:return[2]}}))}))}}function H(e){var t=this,r=e.itemKey;return function(e){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t,n,s,i,c;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return(t=e(Object(b.readItems)((function(e){return e.demandItemFacet(P,r)}))))?((n=new f.ItemResolver).resolveItems({items:(i={},i[r]=Object(a.__assign)(Object(a.__assign)(Object(a.__assign)({},O.displayNameFacet.pack(t.name)),2===t.type?Object(a.__assign)(Object(a.__assign)(Object(a.__assign)({},O.folderFacet.pack({})),O.fileNameFacet.pack({name:t.name,extension:""})),p.defaultChildItemSetFacet.pack({itemKey:K.serialize({fileEntry:C.deserialize(r)})})):Object(a.__assign)(Object(a.__assign)({},p.defaultChildItemSetFacet.pack(void 0)),O.folderFacet.pack(void 0))),1===t.type?Object(a.__assign)({},O.fileNameFacet.pack(L(t.name))):{}),i)}),1!==t.type&&0!==t.type?[3,2]:[4,t.getFile()]):[2];case 1:s=o.sent(),n.resolveItems({items:(c={},c[r]=Object(a.__assign)(Object(a.__assign)(Object(a.__assign)(Object(a.__assign)(Object(a.__assign)({},O.fileNameFacet.pack(L(s.name))),O.folderFacet.pack(void 0)),O.fileSizeFacet.pack(s.size)),O.dateModifiedFacet.pack(s.lastModified)),I.sourceFileFacet.pack(s)),c)}),o.label=2;case 2:return[4,e(_)(n)];case 3:return o.sent(),[2]}}))}))}}function N(e){var t=this,r=e.itemKey,n=K.deserialize(r),s=n.fileEntry,i=C.serialize(s);return function(e){return Object(a.__awaiter)(t,void 0,void 0,(function(){function t(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t,r,n,c,d,p;return Object(a.__generator)(this,(function(b){switch(b.label){case 0:for(e=o.entries,t=o.getEntries,r=0,n=e;r<n.length;r++)c=n[r],d=C.serialize(Object(a.__assign)(Object(a.__assign)({},s),{index:m,path:s.path+"/"+c.name})),u.resolveItems({items:(p={},p[d]=Object(a.__assign)(Object(a.__assign)({},P.pack(c)),O.parentFolderItemFacet.pack({itemKey:i})),p)}),l.push(d),m++;return t?[4,t()]:[3,2];case 1:o=b.sent(),b.label=2;case 2:return[2,!!t]}}))}))}var c,o,l,m,u,d,I,j,v;return Object(a.__generator)(this,(function(O){switch(O.label){case 0:return(c=e(Object(b.readItems)((function(e){return e.demandItemFacet(P,C.serialize(s))}))))&&2===c.type?[4,c.getEntries()]:[2];case 1:return o=O.sent(),l=[],m=0,u=new f.ItemResolver,[4,t()];case 2:return(d=O.sent())?[4,t()]:[3,4];case 3:d=O.sent(),O.label=4;case 4:return d&&(I=w.serialize({fileEntryChildren:n,startIndex:m}),u.merge(Object(g.resolveNewPage)({itemKey:I}).itemResolver),u.resolveItems({items:(j={},j[I]=Object(a.__assign)({},z.pack(o)),j)}),l.push(I)),u.resolveItems({items:(v={},v[r]=Object(a.__assign)(Object(a.__assign)({},p.childItemsFacet.pack({itemKeys:l})),p.parentItemFacet.pack({itemKey:i})),v)}),[4,e(_)(u)];case 5:return O.sent(),[2]}}))}))}}function R(e){var t=this,r=e.itemKey,n=w.deserialize(r),s=n.fileEntryChildren,i=n.startIndex,c=s.fileEntry,o=C.serialize(c);return function(e){return Object(a.__awaiter)(t,void 0,void 0,(function(){function t(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t,r,n,s,i,p;return Object(a.__generator)(this,(function(b){switch(b.label){case 0:for(e=l.entries,t=l.getEntries,r=0,n=e;r<n.length;r++)s=n[r],i=C.serialize(Object(a.__assign)(Object(a.__assign)({},c),{index:m,path:c.path+"/"+s.name})),d.resolveItems({items:(p={},p[i]=Object(a.__assign)(Object(a.__assign)({},P.pack(s)),O.parentFolderItemFacet.pack({itemKey:o})),p)}),u.push(i),m++;return t?[4,t()]:[3,2];case 1:l=b.sent(),b.label=2;case 2:return[2,!!t]}}))}))}var n,l,m,u,d,p,I,j;return Object(a.__generator)(this,(function(c){switch(c.label){case 0:return(n=e(Object(b.readItems)((function(e){return e.demandItemFacet(z,r)}))))&&n.getEntries?[4,n.getEntries()]:[2];case 1:return l=c.sent(),m=i,u=[],d=new f.ItemResolver,[4,t()];case 2:return(p=c.sent())?[4,t()]:[3,4];case 3:p=c.sent(),c.label=4;case 4:return p&&(I=w.serialize({fileEntryChildren:s,startIndex:m}),d.merge(Object(g.resolveNewPage)({itemKey:I}).itemResolver),d.resolveItems({items:(j={},j[I]=Object(a.__assign)({},z.pack(l)),j)}),u.push(I)),d.merge(Object(g.resolveExistingPage)({itemKey:r,itemSetKey:K.serialize(s),childItemKeys:u}).itemResolver),[4,e(_)(d)];case 5:return c.sent(),[2]}}))}))}}function B(e){var t=this,r=e.itemKey;return function(e){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){return e(Object(i.e)({items:e(Object(b.readItems)((function(e){for(var t,a={},n=[r];t=n.pop();){a[t]=!0;var s=e.demandItemFacet(p.defaultChildItemSetFacet,t),i=s&&s.itemKey;i&&(a[i]=!0);var c=e.demandItemFacet(p.childItemsFacet,i),o=c&&c.itemKeys;o&&n.push.apply(n,o)}return a})))})),[2]}))}))}}function L(e){var t=e.lastIndexOf(".");return t>-1?{name:e.slice(0,t),extension:e.slice(t)}:{name:e,extension:""}}},997:function(e,t,r){"use strict";r.r(t),r.d(t,"moveCopyItems",(function(){return P}));var a,n,s=r(0),i=r(60),c=r(917),o=r(29),l=r(332),m=r(127),u=r(56),d=r(3),p=r(71),O=r(20),b=r(141),f=r(300),g=r(117),I=r(265),j=r(501),v=r(10),y=new Proxy({},{get:(e,t)=>localizationLoader.getLocalizedString("uZ+6vqVt16GlTtqnFMbm/g",t)}),_=r(19),h=((a={})[u.ProgressPhase.started]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.moveStartedItemsTitle,y.moveCompletedItemsTitleIntervals,e)||"",e)},a[u.ProgressPhase.completed]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.moveCompletedItemsTitle,y.moveCompletedItemsTitleIntervals,e)||"",e)},a[u.ProgressPhase.failed]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.moveFailedItemsTitle,y.moveFailedItemsTitleIntervals,e)||"",e)},a[u.ProgressPhase.canceled]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.moveFailedItemsTitle,y.moveFailedItemsTitleIntervals,e)||"",e)},a),F=((n={})[u.ProgressPhase.started]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.copyStartedItemsTitle,y.copyCompletedItemsTitleIntervals,e)||"",e)},n[u.ProgressPhase.completed]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.copyCompletedItemsTitle,y.copyCompletedItemsTitleIntervals,e)||"",e)},n[u.ProgressPhase.failed]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.copyFailedItemsTitle,y.copyFailedItemsTitleIntervals,e)||"",e)},n[u.ProgressPhase.canceled]=function(e){return Object(_.format)(Object(_.getLocalizedCountValue)(y.copyFailedItemsTitle,y.copyFailedItemsTitleIntervals,e)||"",e)},n),C=Object(g.createAddon)((function(){return function(e){e(Object(I.registerControlHandler)(c.moveCopyItemsProgressKeyFacet,j.progressControl)(Object(I.createControlHandler)()(K)))}}));function K(){return function(e){return w}}function w(e,t){var r,a=t.itemKey;if("item"===t.format){(n=e.demandItemFacet(c.moveCopyItemsOperation,a))&&(r=e.demandItemFacet(v.displayNameFacet,a))}else{var n,i=e.demandItemFacet(p.childItemsFacet,a),o=i&&i.itemKeys;if(o&&o[0])if(n=e.demandItemFacet(c.moveCopyItemsOperation,o[0])){var m=n[Object.keys(n)[0]].isMove,u=Object(l.getOverallSimpleProgressBreakdown)(e,t),d=u.phase,O=u.count;r=m?h[d](O):F[d](O)}}return Object(s.__assign)({},r?{title:r}:{})}var P=Object(o.createAsyncActionCreator)((function(e){return function(t){return Object(s.__awaiter)(void 0,void 0,void 0,(function(){var r,a,n,o,g,I,j,v,y,_,h,F,K,w,P,k,z,x,T,E,S,H,N,R,B;return Object(s.__generator)(this,(function(L){switch(L.label){case 0:for(r=[],t(C),a=0,n=Object.keys(e.items);a<n.length;a++){for(o=n[a],g=e.items[o],I=l.progressBatchKeyFacet.serializeNext(),j=c.moveCopyItemsProgressKeyFacet.serializeBatchKey(I),v=[],y=new m.ItemResolver,_=0,h=Object.keys(g);_<h.length;_++)w=h[_],(E={})[w]=g[w],P=E,k=c.moveCopyItemsProgressKeyFacet.serializeTaskKey(I,w,P),y.resolveItems({items:(S={},S[k]=Object(s.__assign)(Object(s.__assign)(Object(s.__assign)(Object(s.__assign)({},u.sourceItemFacet.pack({itemKey:w})),u.destinationItemFacet.pack({itemKey:o})),Object(d.pack)({options:c.moveCopyItemsOperation},{options:P})),u.progressPhaseFacet.pack(u.ProgressPhase.created)),S)}),v.push(k);for(y.resolveItems({items:(H={},H[l.progressRootItemKey]=Object(d.pack)({childItems:p.childItemsFacet},{childItems:{itemKeys:new O.ArrayConcatIfNotMatchKeyPatch([j],(function(e){return e}))}}),H[j]=Object(s.__assign)(Object(s.__assign)({},Object(d.pack)({childItems:p.childItemsFacet},{childItems:{itemKeys:new O.ArrayConcatIfNotMatchKeyPatch(v,(function(e){return e}))}})),b.isGroupFacet.pack(!0)),H)}),t(y.execute()),F=0,K=Object.keys(g);F<K.length;F++)w=K[F],(N={})[w]=g[w],P=N,k=c.moveCopyItemsProgressKeyFacet.serializeTaskKey(I,w,P),z=t(Object(i.startOperation)({operationTypeFacet:c.moveCopyItemsOperation,items:(R={},R[o]=(B={},B[w]=Object(s.__assign)(Object(s.__assign)({},g[w]),{progressItemKey:k}),B),R)})),x=z.completed,T=z.items,t(Object(l.trackItemProgress)(Object(s.__assign)({progressItemKey:k,progressSize:1},T[o]))),r.push(x)}return[4,Object(f.waitForAll)(r)];case 1:return L.sent(),[2]}}))}))}}))}}]);
//# sourceMappingURL=index.items-view-deferredoperations.js.map